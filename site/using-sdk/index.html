
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Branch Deep Link Documentation">
      
      
        <link rel="canonical" href="https://snakingfire.github.io/build-an-app/using-sdk/">
      
      
        <meta name="author" content="Branch">
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.6.1">
    
    
      
        <title>Using the SDK - Branch Documentation</title>
      
    
    
      <script src="../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-4d0d3f2fbf.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-f78e5cb881.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="light-blue" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="https://snakingfire.github.io/build-an-app" title="Branch Documentation" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            Using the SDK
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/snakingfire/branch-docs" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Branch Documentation
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">

  <!-- Site title -->
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Branch Documentation
  </label>

  <!-- Repository containing source -->
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/snakingfire/branch-docs" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Branch Documentation
    </div>
  </a>

    </div>
  

  <!-- Render item list -->
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Integrating an app with Branch" class="md-nav__link">
      Integrating an app with Branch
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../sdk/" title="Getting the SDK" class="md-nav__link">
      Getting the SDK
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../dash/" title="Creating an app" class="md-nav__link">
      Creating an app
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ul-uri/" title="Opening the app with links" class="md-nav__link">
      Opening the app with links
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Using the SDK
      </label>
    
    <a href="./" title="Using the SDK" class="md-nav__link md-nav__link--active">
      Using the SDK
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#initializing-branch" title="Initializing Branch" class="md-nav__link">
    Initializing Branch
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handling-links" title="Handling Links" class="md-nav__link">
    Handling Links
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deep-link-routing" title="Deep Link routing" class="md-nav__link">
    Deep Link routing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#content-sharing" title="Content Sharing" class="md-nav__link">
    Content Sharing
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../final/" title="Putting it all together" class="md-nav__link">
      Putting it all together
    </a>
  </li>

    
    <li class="md-nav__item" style="padding-top: 5em">
      <a class="md-nav__link" href="slack://channel?team=T02BUTP4H&id=C1U7KNG0K" title="Something broke! Help me!">Something broke! Help me!</a>
    </li>
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#initializing-branch" title="Initializing Branch" class="md-nav__link">
    Initializing Branch
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handling-links" title="Handling Links" class="md-nav__link">
    Handling Links
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deep-link-routing" title="Deep Link routing" class="md-nav__link">
    Deep Link routing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#content-sharing" title="Content Sharing" class="md-nav__link">
    Content Sharing
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/snakingfire/branch-docs/edit/master/docs/using-sdk.md" title="Edit this page" class="md-icon md-content__icon">edit</a>
                
                
                  <h1>Using the SDK</h1>
                
                <h3 id="initializing-branch">Initializing Branch<a class="headerlink" href="#initializing-branch" title="Permanent link">&para;</a></h3>
<p>Now that we have all of the setup out of the way, we can start using the SDK. The first thing that we need to do is import the Branch SDK, so we can make use of it in your app. To do this, find the <code>import UIKit</code> line at the top of your <code>AppDelegate</code> file, and add a new line below it:
<div class="codehilite"><pre><span></span><span class="kd">import</span> <span class="nc">Branch</span>
</pre></div>
</p>
<p>Next, lets initialize a Branch session. To do this, open your AppDelegate file in Xcode, and find the application:didFinishLaunchingWithOptions section of code. On the line above <code>return true</code> add:</p>
<div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">branch</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">()</span>
</pre></div>


<p>Then, one line below, add the Branch <code>initSession</code> call:</p>
<div class="codehilite"><pre><span></span><span class="n">branch</span><span class="p">?.</span><span class="n">initSession</span><span class="p">(</span><span class="n">launchOptions</span><span class="p">:</span> <span class="n">launchOptions</span><span class="p">,</span> <span class="n">andRegisterDeepLinkHandler</span><span class="p">:</span> <span class="p">{</span><span class="n">params</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
    <span class="c1">// Check if an error occurred while getting deep link data</span>
    <span class="k">if</span> <span class="n">error</span> <span class="p">==</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="c1">// params are the deep linked params associated with the link that the user clicked -&gt; was re-directed to this app</span>
        <span class="c1">// params will be empty if no data found</span>
        <span class="c1">// ... insert custom logic here ...</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;params: %@&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">!.</span><span class="n">description</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">})</span>
</pre></div>


<p>This code initiates a call to Branch's API to retrieve any deep link data that might exist. Right now, all it's doing is printing the data out to the Xcode console and then continuing startup as normal. To get your links to route users to the correct place in your app, we need to add some custom routing logic.</p>
<h3 id="handling-links">Handling Links<a class="headerlink" href="#handling-links" title="Permanent link">&para;</a></h3>
<p>Before we start deep linking to all the various parts of your app, we need to make sure that your app is aware of "incoming" links and that it is set up to handle them correctly. To do this, add the following two functions to your <code>AppDelegate</code>, right before the very last <code>}</code> in the file:</p>
<div class="codehilite"><pre><span></span><span class="c1">// Respond to URI scheme links</span>
<span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="kc">_</span> <span class="n">application</span><span class="p">:</span> <span class="bp">UIApplication</span><span class="p">,</span> <span class="n">open</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">sourceApplication</span><span class="p">:</span> <span class="nb">String</span><span class="p">?,</span> <span class="n">annotation</span><span class="p">:</span> <span class="nb">Any</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
    <span class="c1">// pass the url to the handle deep link call</span>
    <span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">handleDeepLink</span><span class="p">(</span><span class="n">url</span><span class="p">);</span>

    <span class="c1">// do other deep link routing for the Facebook SDK, Pinterest SDK, etc</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="c1">// Respond to Universal Links</span>
<span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="kc">_</span> <span class="n">application</span><span class="p">:</span> <span class="bp">UIApplication</span><span class="p">,</span> <span class="k">continue</span> <span class="n">userActivity</span><span class="p">:</span> <span class="bp">NSUserActivity</span><span class="p">,</span> <span class="n">restorationHandler</span><span class="p">:</span> <span class="p">@</span><span class="n">escaping</span> <span class="p">([</span><span class="nb">Any</span><span class="p">]?)</span> <span class="p">-&gt;</span> <span class="nb">Void</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
    <span class="c1">// pass the url to the handle deep link call</span>
    <span class="n">Branch</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="k">continue</span><span class="p">(</span><span class="n">userActivity</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>


<h3 id="deep-link-routing">Deep Link routing<a class="headerlink" href="#deep-link-routing" title="Permanent link">&para;</a></h3>
<p>The last core component of deep linking we need to add to your app is the code that decides where to take the user, depending on the data inside of the Branch link they clicked.</p>
<p>To start off, let's add a unique identifier to the <code>DetailView</code> so we can reference it in our routing code:</p>
<ol>
<li>Open the <code>MainStoryboard</code> file in your project</li>
<li>Select the <code>DetailViewController</code></li>
<li>Expand the right-hand side bar</li>
<li>Open the <code>Identity inspector</code> (third tab from the left)</li>
<li>Set the <code>Storyboard id</code> to <code>animalDetails</code></li>
</ol>
<p><img alt="image" src="../view_id.gif" /></p>
<p>Now that we access the Storyboard view, we can start adding code to open and populate the view on a deep link. The first thing we need to do is add a variable to the <code>AppDelegate</code> file to let us track and set the type of animal we will show to the user on startup. Below the line with <code>var window: UIWindow?</code>, add a new variable:
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nv">selectedAnimal</span><span class="p">:</span> <span class="nb">String</span><span class="p">?</span>
</pre></div>
</p>
<p>Now, go back the the <code>initSession</code> call you added earlier, and replace this block of code:
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="n">error</span> <span class="p">==</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="c1">// params are the deep linked params associated with the link that the user clicked -&gt; was re-directed to this app</span>
    <span class="c1">// params will be empty if no data found</span>
    <span class="c1">// ... insert custom logic here ...</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;params: %@&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">.</span><span class="n">description</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

with this one:
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="n">error</span> <span class="p">==</span> <span class="kc">nil</span> <span class="o">&amp;&amp;</span> <span class="n">params</span><span class="p">?[</span><span class="s">&quot;animal&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>

    <span class="kc">self</span><span class="p">.</span><span class="n">selectedAnimal</span> <span class="p">=</span> <span class="n">params</span><span class="p">?[</span><span class="s">&quot;animal&quot;</span><span class="p">]</span><span class="o">!</span> <span class="k">as</span><span class="p">!</span> <span class="nb">String</span><span class="p">?</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Clicked animal link for </span><span class="si">\(</span><span class="kc">self</span><span class="p">.</span><span class="n">selectedAnimal</span><span class="p">!</span><span class="si">)</span><span class="s">!&quot;</span><span class="p">)</span>

    <span class="kd">let</span> <span class="nv">storyboard</span> <span class="p">=</span> <span class="bp">UIStoryboard</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="s">&quot;Main&quot;</span><span class="p">,</span> <span class="n">bundle</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nv">mainController</span> <span class="p">=</span> <span class="n">storyboard</span><span class="p">.</span><span class="n">instantiateInitialViewController</span><span class="p">()</span><span class="o">!</span> <span class="k">as</span> <span class="bp">UIViewController</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">!.</span><span class="n">rootViewController</span> <span class="p">=</span> <span class="n">mainController</span>

    <span class="kd">let</span> <span class="nv">destination</span> <span class="p">=</span> <span class="n">storyboard</span><span class="p">.</span><span class="n">instantiateViewController</span><span class="p">(</span><span class="n">withIdentifier</span><span class="p">:</span> <span class="s">&quot;animalDetails&quot;</span><span class="p">)</span> <span class="k">as</span><span class="p">!</span> <span class="n">DetailViewController</span>
    <span class="n">destination</span><span class="p">.</span><span class="n">selectedAnimal</span> <span class="p">=</span> <span class="nb">String</span><span class="p">(</span><span class="n">describing</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">selectedAnimal</span><span class="p">!)</span>

    <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">!.</span><span class="n">rootViewController</span><span class="p">?.</span><span class="n">present</span><span class="p">(</span><span class="n">destination</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>

<span class="p">}</span>
</pre></div>
</p>
<p>This is quite a change, so let's go back over it and see what each part is doing.</p>
<p>To start off, the first line:
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="n">error</span> <span class="p">==</span> <span class="kc">nil</span> <span class="o">&amp;&amp;</span> <span class="n">params</span><span class="p">?[</span><span class="s">&quot;+clicked_branch_link&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="o">&amp;&amp;</span> <span class="n">params</span><span class="p">?[</span><span class="s">&quot;animal&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</pre></div>

is checking to make sure that:</p>
<ol>
<li>No errors occurred while we were retrieving the deep link data from Branch</li>
<li>The deep link data that was returned has an <code>animal</code></li>
</ol>
<p>Once we have verified that nothing went wrong, and that we have the data we need to route the user, we set the <code>selectedAnimal</code> variable to the <code>animal</code> in the deep link data:
<div class="codehilite"><pre><span></span><span class="kc">self</span><span class="p">.</span><span class="n">selectedAnimal</span> <span class="p">=</span> <span class="n">params</span><span class="p">?[</span><span class="s">&quot;animal&quot;</span><span class="p">]</span><span class="o">!</span> <span class="k">as</span><span class="p">!</span> <span class="nb">String</span><span class="p">?</span>
</pre></div>
</p>
<p>Now, with an animal to show to the user, we can start preparing the view components that we will show to the user. In order to do this, we need to set up the main view controller, and then get an instance of the DetailViewController we will show to the user:
<div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">storyboard</span> <span class="p">=</span> <span class="bp">UIStoryboard</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="s">&quot;Main&quot;</span><span class="p">,</span> <span class="n">bundle</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">mainController</span> <span class="p">=</span> <span class="n">storyboard</span><span class="p">.</span><span class="n">instantiateInitialViewController</span><span class="p">()</span><span class="o">!</span> <span class="k">as</span> <span class="bp">UIViewController</span>
<span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">!.</span><span class="n">rootViewController</span> <span class="p">=</span> <span class="n">mainController</span>

<span class="kd">let</span> <span class="nv">destination</span> <span class="p">=</span> <span class="n">storyboard</span><span class="p">.</span><span class="n">instantiateViewController</span><span class="p">(</span><span class="n">withIdentifier</span><span class="p">:</span> <span class="s">&quot;animalDetails&quot;</span><span class="p">)</span> <span class="k">as</span><span class="p">!</span> <span class="n">DetailViewController</span>
</pre></div>
</p>
<p>Finally, we set the <code>selectedAnimal</code> property of our destination view to the <code>animal</code> we pulled from the returned deep link data, and present the view to the user.</p>
<div class="codehilite"><pre><span></span><span class="n">destination</span><span class="p">.</span><span class="n">selectedAnimal</span> <span class="p">=</span> <span class="nb">String</span><span class="p">(</span><span class="n">describing</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">selectedAnimal</span><span class="p">!)</span>

<span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">!.</span><span class="n">rootViewController</span><span class="p">?.</span><span class="n">present</span><span class="p">(</span><span class="n">destination</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</pre></div>


<h3 id="content-sharing">Content Sharing<a class="headerlink" href="#content-sharing" title="Permanent link">&para;</a></h3>
<p>One of the most valuable link distribution channels that you as a developer have access to are your users. To make sure that you fully support this, it's important to add content sharing functionality to your app, to provide an easy way for your users to create and send links. Thankfully, with Branch, content sharing is a very easy process. All you need to do is:</p>
<ol>
<li>Configure the link properties (eg Redirect URL's)</li>
<li>Add link data (eg the <code>animal</code> property)</li>
<li>Show the user the share sheet</li>
</ol>
<p>To add sharing to your Branch app, open the <code>MainStoryboad</code> file, and add a new button, called "Share", somewhere on the DetailView:</p>
<blockquote>
<p>Don't forget to add constraints to the button, or it may show up in an unexpected place on the view
1. <code>Control + Drag</code> the button into the <code>DetailViewController</code>
1. Change the <code>Connection</code> type to <code>action</code>
1. Name the connection something like <code>shareButton</code></p>
</blockquote>
<p><img alt="image" src="../share_button.gif" /></p>
<p>At the top of the <code>DetailViewController</code>, add <code>import Branch</code>. Then, inside of the <code>@IBAction func shareButton</code> code block, add the following code:
<div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">linkProperties</span><span class="p">:</span> <span class="n">BranchLinkProperties</span> <span class="p">=</span> <span class="n">BranchLinkProperties</span><span class="p">()</span>
<span class="n">linkProperties</span><span class="p">.</span><span class="n">feature</span> <span class="p">=</span> <span class="s">&quot;sharing&quot;</span>

<span class="kd">let</span> <span class="nv">branchUniversalObject</span><span class="p">:</span> <span class="n">BranchUniversalObject</span> <span class="p">=</span> <span class="n">BranchUniversalObject</span><span class="p">(</span><span class="n">canonicalIdentifier</span><span class="p">:</span> <span class="s">&quot;item/</span><span class="si">\(</span><span class="n">selectedAnimal</span><span class="p">!</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">branchUniversalObject</span><span class="p">.</span><span class="n">addMetadataKey</span><span class="p">(</span><span class="s">&quot;animal&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">selectedAnimal</span><span class="p">!)</span>
<span class="n">branchUniversalObject</span><span class="p">.</span><span class="n">canonicalIdentifier</span> <span class="p">=</span> <span class="n">selectedAnimal</span><span class="p">!</span>
<span class="n">branchUniversalObject</span><span class="p">.</span><span class="n">title</span> <span class="p">=</span> <span class="n">animalType</span><span class="p">.</span><span class="n">text</span><span class="p">!</span>
<span class="n">branchUniversalObject</span><span class="p">.</span><span class="n">contentDescription</span> <span class="p">=</span> <span class="s">&quot;Check out my </span><span class="si">\(</span><span class="n">selectedAnimal</span><span class="p">!</span><span class="si">)</span><span class="s">!&quot;</span>

<span class="n">branchUniversalObject</span><span class="p">.</span><span class="n">showShareSheet</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">linkProperties</span><span class="p">,</span>
    <span class="n">andShareText</span><span class="p">:</span> <span class="s">&quot;Here&#39;s my </span><span class="si">\(</span><span class="n">selectedAnimal</span><span class="p">!</span><span class="si">)</span><span class="s">!&quot;</span><span class="p">,</span>
    <span class="n">from</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">activityType</span><span class="p">,</span> <span class="n">completed</span><span class="p">)</span> <span class="k">in</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">completed</span><span class="p">)</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="n">format</span><span class="p">:</span> <span class="s">&quot;Completed sharing %@ to %@&quot;</span><span class="p">,</span> <span class="kc">self</span><span class="p">.</span><span class="n">selectedAnimal</span><span class="p">!,</span> <span class="n">activityType</span><span class="p">!))</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Link sharing cancelled&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</p>
<p>The first thing we are doing here is creating a <code>BranchLinkProperties</code> object:
<div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">linkProperties</span><span class="p">:</span> <span class="n">BranchLinkProperties</span> <span class="p">=</span> <span class="n">BranchLinkProperties</span><span class="p">()</span>
<span class="n">linkProperties</span><span class="p">.</span><span class="n">feature</span> <span class="p">=</span> <span class="s">&quot;sharing&quot;</span>
</pre></div>

which stores the "control" information on the link. This is the object used to define analytics information (in this case the feature) as well as the control parameters, like the iOS fallback URL.</p>
<p>The next object we are building is the <code>BranchUniversalObject</code>:
<div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">branchUniversalObject</span><span class="p">:</span> <span class="n">BranchUniversalObject</span> <span class="p">=</span> <span class="n">BranchUniversalObject</span><span class="p">(</span><span class="n">canonicalIdentifier</span><span class="p">:</span> <span class="s">&quot;item/</span><span class="si">\(</span><span class="n">selectedAnimal</span><span class="p">!</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">branchUniversalObject</span><span class="p">.</span><span class="n">addMetadataKey</span><span class="p">(</span><span class="s">&quot;animal&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">selectedAnimal</span><span class="p">!)</span>
<span class="n">branchUniversalObject</span><span class="p">.</span><span class="n">canonicalIdentifier</span> <span class="p">=</span> <span class="n">selectedAnimal</span><span class="p">!</span>
<span class="n">branchUniversalObject</span><span class="p">.</span><span class="n">title</span> <span class="p">=</span> <span class="n">animalType</span><span class="p">.</span><span class="n">text</span><span class="p">!</span>
<span class="n">branchUniversalObject</span><span class="p">.</span><span class="n">contentDescription</span> <span class="p">=</span> <span class="s">&quot;Check out my </span><span class="si">\(</span><span class="n">selectedAnimal</span><span class="p">!</span><span class="si">)</span><span class="s">!&quot;</span>
</pre></div>

This contains social media information, like the link image and content description, as well as custom data, like the <code>animal</code>.</p>
<p>The last part of the sharing flow is showing the <code>share sheet</code> to the user, so they can select the app they would like to send the link with:
<div class="codehilite"><pre><span></span><span class="n">branchUniversalObject</span><span class="p">.</span><span class="n">showShareSheet</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">linkProperties</span><span class="p">,</span>
    <span class="n">andShareText</span><span class="p">:</span> <span class="s">&quot;Here&#39;s my </span><span class="si">\(</span><span class="n">selectedAnimal</span><span class="p">!</span><span class="si">)</span><span class="s">!&quot;</span><span class="p">,</span>
    <span class="n">from</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">activityType</span><span class="p">,</span> <span class="n">completed</span><span class="p">)</span> <span class="k">in</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">completed</span><span class="p">)</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="n">format</span><span class="p">:</span> <span class="s">&quot;Completed sharing %@ to %@&quot;</span><span class="p">,</span> <span class="kc">self</span><span class="p">.</span><span class="n">selectedAnimal</span><span class="p">!,</span> <span class="n">activityType</span><span class="p">!))</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Link sharing cancelled&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</p>
<p>When the user chooses an app, the message body will automatically be populated with the message (eg "Here's my cat!") with a Branch link appended.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../ul-uri/" title="Opening the app with links" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Opening the app with links
              </span>
            </div>
          </a>
        
        
          <a href="../final/" title="Putting it all together" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Putting it all together
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 <a href="https://branch.io">Branch</a>
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://branch.io" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/BranchMetrics/Documentation" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/branchmetrics" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.facebook.com/branchmetrics" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://www.linkedin.com/company-beta/3813083" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-6b599127bc.js"></script>
      <script>app.initialize({url:{base:".."}})</script>
      
        <script src="../js/extra.js"></script>
      
    
    
      
      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-XXXXXXXX-X","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>